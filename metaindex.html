<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Metas</title>
    <link rel="stylesheet" href="meta.css">
  
</head>
<body>
    <header>
        <div class="container">
            <h1>Metas de Reciclagem para um Futuro Sustentável</h1>
            <nav>
                <ul>
                    <li><a href="#SaibaMais">Saiba mais</a></li>
                    <li><a href="#objetivo">Minhas metas</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <section id="SaibaMais">
        <div class="container">
            <h2>Saiba mais</h2>
            <p>A reciclagem é uma das principais estratégias para reduzir o impacto ambiental causado pelo acúmulo de lixo. Estabelecer metas de reciclagem claras é fundamental para alcançar uma sociedade mais sustentável.</p>
        </div>
    </section>

    <section id="objetivo">
        <div class="container">
            <h2>Descreva abaixo suas metas</h2>
            <input type="text" id="metaInput" placeholder="Digite sua meta">
            <select id="categoriaInput">
                <option value="manutenção">Manutenção</option>
                <option value="eventos">Eventos</option>
                <option value="melhorias">Melhorias</option>
            </select>
            <button onclick="adicionarMeta()">Adicionar Meta</button>

            <div class="notificacao" id="notificacao">Meta adicionada com sucesso!</div>

            <div class="filtros">
                <label for="filtroStatus">Filtrar por status:</label>
                <select id="filtroStatus" onchange="carregarMetas()">
                    <option value="todos">Todos</option>
                    <option value="pendente">Pendente</option>
                    <option value="em andamento">Em andamento</option>
                    <option value="concluída">Concluída</option>
                </select>

                <label for="filtroCategoria">Filtrar por categoria:</label>
                <select id="filtroCategoria" onchange="carregarMetas()">
                    <option value="todas">Todas</option>
                    <option value="manutenção">Manutenção</option>
                    <option value="eventos">Eventos</option>
                    <option value="melhorias">Melhorias</option>
                </select>
            </div>

            <ul id="listaMetas"></ul>
        </div>
    </section>

    <footer>
        <div class="container">
            <p>&copy; 2025 ecoweb. Todos os direitos reservados.</p>
        </div>
    </footer>

    <script>
        function carregarMetas() {
            const metas = JSON.parse(localStorage.getItem('metas')) || [];
            const listaMetas = document.getElementById('listaMetas');
            listaMetas.innerHTML = '';

            const filtroStatus = document.getElementById('filtroStatus').value;
            const filtroCategoria = document.getElementById('filtroCategoria').value;

            metas.forEach((meta, index) => {
                if (
                    (filtroStatus === 'todos' || meta.status === filtroStatus) &&
                    (filtroCategoria === 'todas' || meta.categoria === filtroCategoria)
                ) {
                    const li = document.createElement('li');
                    li.classList.add('tarefa');

                    li.innerHTML = `
                        <strong>${meta.texto}</strong> <br>
                        <em>Status:</em> ${meta.status} |
                        <em>Categoria:</em> ${meta.categoria}
                        <span class="edit" onclick="editarMeta(${index})">Editar</span>
                        <span class="remove" onclick="removerMeta(${index})">Excluir</span><br>
                        <button class="status-btn" onclick="alterarStatus(${index}, 'pendente')">Pendente</button>
                        <button class="status-btn" onclick="alterarStatus(${index}, 'em andamento')">Em Andamento</button>
                        <button class="status-btn" onclick="alterarStatus(${index}, 'concluída')">Concluída</button>

                        <div class="comentarios">
                            <label>Comentário:</label>
                            <input type="text" onkeydown="if(event.key==='Enter'){adicionarComentario(${index}, this.value); this.value=''}">
                            <ul id="comentarios-${index}">${(meta.comentarios || []).map(com => `<li>${com}</li>`).join('')}</ul>
                        </div>
                    `;
                    listaMetas.appendChild(li);
                }
            });
        }

        function adicionarMeta() {
            const metaInput = document.getElementById('metaInput');
            const categoriaInput = document.getElementById('categoriaInput');
            const texto = metaInput.value.trim();
            const categoria = categoriaInput.value;

            if (texto) {
                const metas = JSON.parse(localStorage.getItem('metas')) || [];
                metas.push({ texto, status: 'pendente', categoria, comentarios: [] });
                localStorage.setItem('metas', JSON.stringify(metas));
                metaInput.value = '';
                document.getElementById('notificacao').style.display = 'block';
                setTimeout(() => document.getElementById('notificacao').style.display = 'none', 3000);
                carregarMetas();
            } else {
                alert('Por favor, digite uma meta.');
            }
        }

        function removerMeta(index) {
            const metas = JSON.parse(localStorage.getItem('metas')) || [];
            metas.splice(index, 1);
            localStorage.setItem('metas', JSON.stringify(metas));
            carregarMetas();
        }

        function editarMeta(index) {
            const novasMetas = JSON.parse(localStorage.getItem('metas')) || [];
            const novaMeta = prompt("Edite sua meta:", novasMetas[index].texto);
            if (novaMeta !== null) {
                novasMetas[index].texto = novaMeta.trim();
                localStorage.setItem('metas', JSON.stringify(novasMetas));
                carregarMetas();
            }
        }

        function alterarStatus(index, novoStatus) {
            const metas = JSON.parse(localStorage.getItem('metas')) || [];
            metas[index].status = novoStatus;
            localStorage.setItem('metas', JSON.stringify(metas));
            carregarMetas();
        }

        function adicionarComentario(index, comentario) {
            if (comentario.trim()) {
                const metas = JSON.parse(localStorage.getItem('metas')) || [];
                metas[index].comentarios = metas[index].comentarios || [];
                metas[index].comentarios.push(comentario);
                localStorage.setItem('metas', JSON.stringify(metas));
                carregarMetas();
            }
        }

        window.onload = carregarMetas;
    </script>
</body>
</html>
